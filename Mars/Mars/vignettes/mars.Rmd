---
title: "Multivariate Adaptive Regression Splines (MARS)"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Mars}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

#### Description

Using methods from Friedman's paper "Multivariate Adaptive Regression Splines" to construct a regression model.

#### Usage

```{r eval=FALSE}
mars(formula, data, control = NULL)
```

#### Arguments

  *formula*   an R formula.
  
  *data*      a data frame containing the data for the model.
  
  *control*   an object of class 'mars.control'.

#### Details

Jerome H. Friedman introduced a type of regression analysis called Multivariate Adaptive Regression Spline (MARS). MARS is a non-parametric regression technique that automatically models nonlinearities and interactions between variables. MARS begins by recursively partitioning the data into two subsets and fitting a linear regression model to the regions. The predictor variable is where the subsetting occurs and is chosen by the forward stepwise method, which selects the best predictor variable.Again, repeated for each subset. A new predictor variable is added to the model, using the residuals from the two models. The process is repeated until the Mmax of basis functions is reached. The resulting model consists of the selected basis functions and their formulas, the names of the predictor variables, and the fitted linear model object.

#### Value

An S3 model of class 'mars'.

#### Author(s)

Group DJT: Dustin Poon, James Lee, Tyler Oh

#### References

Jerome H. Friedman, The Annals of Statistics, Mar., 1991, Vol. 19, No. 1 (Mar., 1991), pp. 1-67.

#### See Also

  *mars.control*    for constructing control object.
  
  *anova.mars*      for the ANOVA table.
  
  *plot.mars*       for plotting the fitted basis function.
  
  *predict.mars*    for Predicting from the fitted model.
  
  *print.mars*      for printing out a mars object.
  
  *summary.mars*    for more detailed summaries of mars object.

#### Examples

### Data

```{r eval=FALSE}
#Wage: R built-in dataset
#iris: The dataset from library(ISLR)
#CarPrice: This dataset is extracted from https://www.kaggle.com/datasets/hellbuoy/car-price-prediction
library(ISLR)
data(Wage)
data(iris)
CarPrice <- read.csv("CarPrice_Assignment.csv")
```

### Control
```{r,eval=FALSE}
mc <- mars.control(Mmax=10)
```

### Example with Wage Dataset
```{r,eval=FALSE}
fit.Wage <- mars(wage ~ age + education, Wage, mc)
print.mars(fit.Wage)
predict.mars(fit.Wage, newdata = data.frame(age=Wage$age,
                                            education = Wage$education))
summary.mars(fit.Wage)
plot.mars(fit.Wage)
anova.mars(fit.Wage)
```

### Example with Iris Dataset
```{r,eval=FALSE}
fit.iris <- mars(Sepal.Length ~., iris, mc)
print.mars(fit.iris)
predict.mars(fit.iris, newdata = data.frame(sepal.width = iris$Sepal.Width,
                                            petal.length = iris$Petal.Length,
                                            petal.width = iris$Petal.Width,
                                            Species = iris$Species))
summary.mars(fit.iris)
plot.mars(fit.iris)
anova.mars(fit.iris)
```

### Example with CarPrice dataset
```{r,eval=FALSE}
fit.CarPrice <- mars(price ~ citympg + highwaympg + horsepower + fueltype, CarPrice, mc)
print.mars(fit.CarPrice)
predict.mars(fit.CarPrice, newdata = data.frame(citympg = CarPrice$citympg,
                                                highwaympg = CarPrice$highwaympg,
                                                horsepower = CarPrice$highwaympg,
                                                fueltype = CarPrice$highwaympg))
summary.mars(fit.CarPrice)
plot.mars(fit.CarPrice)
anova.mars(fit.CarPrice)
```
